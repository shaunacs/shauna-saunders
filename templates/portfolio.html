{% extends 'base.html' %}
{% block title %}Portfolio - Shauna Saunders{% endblock %}
{% block head %}
<link rel="stylesheet" href="../static/css/base.css">
{% endblock %}
{% block body %}
<div class="container">
    <nav class="main-nav">
        <a href="/" class="nav-brand-link"><h2 class="nav-brand">Shauna Saunders</h2></a>
        <button class="hamburger" aria-label="Toggle navigation menu" aria-expanded="false">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <div class="nav-links">
            <a href="/" class="nav-link">Home</a>
            <a href="/about-me" class="nav-link">About</a>
            <a href="/services" class="nav-link">Services</a>
            <a href="/portfolio" class="nav-link active">Portfolio</a>
            <a href="/contact" class="nav-link">Contact</a>
        </div>
    </nav>

    <main class="content">
        <section class="portfolio-section">
            <h1 class="page-title">Portfolio</h1>

            <div class="portfolio-grid">
                <div class="portfolio-item">
                    <h2 class="portfolio-title">Three of Cups LLC</h2>
                    <div class="portfolio-preview video-recording-preview" data-href="https://threeofcupsllc.com">
                        <video autoplay loop muted playsinline>
                            <source src="{{ url_for('static', filename='video/three-of-cups-preview.mp4') }}" type="video/mp4">
                            <img src="{{ url_for('static', filename='img/three-of-cups-preview.png') }}" alt="Three of Cups LLC website preview">
                        </video>
                        <div class="preview-overlay">
                            <span class="preview-link-text">Visit Site</span>
                        </div>
                    </div>
                    <p class="portfolio-description">
                        A friendship matchmaking platform that helps people form meaningful connections and build community. Features include personality assessments, compatibility matching, and community events to bring people together based on shared interests and values.
                    </p>
                    <a href="https://threeofcupsllc.com" target="_blank" class="portfolio-link">
                        Visit Site
                        <svg class="external-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                            <polyline points="15 3 21 3 21 9"></polyline>
                            <line x1="10" y1="14" x2="21" y2="3"></line>
                        </svg>
                    </a>
                </div>

                <div class="portfolio-item">
                    <h2 class="portfolio-title">Hackbright Academy Final Project</h2>
                    <div class="portfolio-preview video-preview">
                        <iframe src="https://www.youtube.com/embed/Q_sMu8OQ93Y" title="Hackbright Academy Final Project demo video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>
                    </div>
                    <p class="portfolio-description">
                        Check out my final project from Hackbright Academy.
                    </p>
                    <a href="https://youtu.be/Q_sMu8OQ93Y" target="_blank" class="portfolio-link">
                        View Demo
                        <svg class="external-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                            <polyline points="15 3 21 3 21 9"></polyline>
                            <line x1="10" y1="14" x2="21" y2="3"></line>
                        </svg>
                    </a>
                </div>

                <div class="portfolio-item featured">
                    <h2 class="portfolio-title">shaunasaunders.com</h2>
                    <div class="portfolio-preview">
                        <iframe src="/" title="shaunasaunders.com homepage preview" loading="lazy"></iframe>
                        <div class="preview-overlay">
                            <span class="preview-badge">You Are Here</span>
                        </div>
                    </div>
                    <p class="portfolio-description">
                        You're already here! This very website you're browsing.
                    </p>
                    <a href="/" class="portfolio-link">
                        You Are Here
                        <svg class="checkmark-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                    </a>
                </div>
            </div>
        </section>
    </main>
</div>

<script>
// Video preview handling
const portfolioVideos = document.querySelectorAll('.video-recording-preview video');

// Try to play all videos immediately
function playAllVideos() {
    portfolioVideos.forEach(video => {
        if (video.paused) {
            video.play().catch(() => {});
        }
    });
}

// Attempt autoplay on load
playAllVideos();

// On mobile, play videos on first user interaction with page
let hasInteracted = false;
const triggerAutoplay = () => {
    if (!hasInteracted) {
        hasInteracted = true;
        playAllVideos();
        // Remove listeners after first interaction
        document.removeEventListener('touchstart', triggerAutoplay);
        document.removeEventListener('scroll', triggerAutoplay);
        document.removeEventListener('click', triggerAutoplay);
    }
};

document.addEventListener('touchstart', triggerAutoplay, { passive: true });
document.addEventListener('scroll', triggerAutoplay, { passive: true });
document.addEventListener('click', triggerAutoplay);

// Handle video preview clicks
document.querySelectorAll('.video-recording-preview').forEach(preview => {
    const video = preview.querySelector('video');
    const overlay = preview.querySelector('.preview-overlay');
    const href = preview.dataset.href;

    // Handle click on overlay to navigate
    if (overlay && href) {
        overlay.addEventListener('click', () => {
            window.open(href, '_blank');
        });
    }

    // Clicking video just ensures it's playing (won't navigate)
    if (video) {
        video.addEventListener('click', (e) => {
            e.stopPropagation();
            if (video.paused) {
                video.play();
            }
        });
    }
});

// Mobile navigation toggle
const hamburger = document.querySelector('.hamburger');
const navLinks = document.querySelector('.nav-links');

if (hamburger && navLinks) {
    hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        navLinks.classList.toggle('active');
        const isExpanded = hamburger.classList.contains('active');
        hamburger.setAttribute('aria-expanded', isExpanded);
    });

    document.addEventListener('click', (e) => {
        if (!hamburger.contains(e.target) && !navLinks.contains(e.target)) {
            hamburger.classList.remove('active');
            navLinks.classList.remove('active');
            hamburger.setAttribute('aria-expanded', 'false');
        }
    });

    const navItems = navLinks.querySelectorAll('.nav-link');
    navItems.forEach(item => {
        item.addEventListener('click', () => {
            hamburger.classList.remove('active');
            navLinks.classList.remove('active');
            hamburger.setAttribute('aria-expanded', 'false');
        });
    });
}
</script>
{% endblock %}
